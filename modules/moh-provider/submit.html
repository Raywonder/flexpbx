<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Submit Stream or Become a Provider - FlexPBX MOH Community</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        h1 {
            color: #667eea;
            margin-bottom: 1rem;
        }

        h2 {
            color: #2c3e50;
            margin: 2rem 0 1rem 0;
        }

        .tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e9ecef;
        }

        .tab {
            padding: 1rem 2rem;
            background: none;
            border: none;
            cursor: pointer;
            color: #666;
            font-size: 1rem;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab:hover {
            color: #667eea;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #2c3e50;
        }

        input[type="text"],
        input[type="email"],
        input[type="url"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .checkbox-group input[type="checkbox"] {
            width: auto;
        }

        .btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            display: none;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .info-box {
            background: #e7f3ff;
            padding: 1rem;
            border-left: 4px solid #667eea;
            margin-bottom: 1rem;
            border-radius: 4px;
        }

        .guideline-list {
            list-style: none;
            padding: 0;
        }

        .guideline-list li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .guideline-list li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .required {
            color: #e74c3c;
        }

        .help-text {
            font-size: 0.85rem;
            color: #666;
            margin-top: 0.25rem;
        }

        .back-link {
            color: white;
            text-decoration: none;
            display: inline-block;
            margin-bottom: 1rem;
        }

        .back-link:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Back to MOH Provider</a>

        <div class="card">
            <h1>üéµ Contribute to FlexPBX MOH Community</h1>
            <p>Help build the world's largest free music on hold network!</p>

            <div class="tabs">
                <button class="tab active" onclick="switchTab('stream')">Submit Stream</button>
                <button class="tab" onclick="switchTab('provider')">Become Provider</button>
                <button class="tab" onclick="switchTab('guidelines')">Guidelines</button>
            </div>

            <div id="alert" class="alert"></div>

            <!-- Submit Stream Tab -->
            <div id="stream-tab" class="tab-content active">
                <h2>Submit a Music Stream</h2>
                <div class="info-box">
                    Submit your stream to be included in the FlexPBX MOH catalog. All submissions are reviewed for quality and licensing compliance.
                </div>

                <form id="stream-form">
                    <div class="form-group">
                        <label>Stream Name <span class="required">*</span></label>
                        <input type="text" name="stream_name" required>
                        <div class="help-text">Short identifier (e.g., "my-radio")</div>
                    </div>

                    <div class="form-group">
                        <label>Display Name <span class="required">*</span></label>
                        <input type="text" name="display_name" required>
                        <div class="help-text">Full name shown to users (e.g., "My Radio Station")</div>
                    </div>

                    <div class="form-group">
                        <label>Stream URL <span class="required">*</span></label>
                        <input type="url" name="stream_url" required>
                        <div class="help-text">Full streaming URL (HTTP or HTTPS)</div>
                    </div>

                    <div class="form-group">
                        <label>Description <span class="required">*</span></label>
                        <textarea name="description" required></textarea>
                        <div class="help-text">Describe the content and style of your stream</div>
                    </div>

                    <div class="form-group">
                        <label>Category <span class="required">*</span></label>
                        <select name="category" required>
                            <option value="">-- Select Category --</option>
                            <option value="music">Music</option>
                            <option value="meditation">Meditation & Wellness</option>
                            <option value="entertainment">Entertainment</option>
                            <option value="news">News & Talk</option>
                            <option value="education">Educational</option>
                            <option value="accessibility">Accessibility-Focused</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Tags (comma-separated)</label>
                        <input type="text" name="tags" placeholder="jazz, relaxing, instrumental">
                        <div class="help-text">Help users discover your stream</div>
                    </div>

                    <div class="form-group">
                        <label>Stream Format</label>
                        <select name="format">
                            <option value="mp3">MP3</option>
                            <option value="aac">AAC</option>
                            <option value="ogg">OGG</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Bitrate</label>
                        <select name="bitrate">
                            <option value="64kbps">64 kbps</option>
                            <option value="128kbps">128 kbps</option>
                            <option value="192kbps">192 kbps</option>
                            <option value="256kbps">256 kbps</option>
                            <option value="320kbps">320 kbps</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Licensing Information <span class="required">*</span></label>
                        <textarea name="licensing" required placeholder="Describe your rights to distribute this content"></textarea>
                        <div class="help-text">e.g., "Own all rights", "Creative Commons BY-SA", "Properly licensed from..."</div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" name="audio_description" id="audio_description">
                            <label for="audio_description">Includes Audio Description (for accessibility)</label>
                        </div>
                    </div>

                    <h3 style="margin-top: 2rem;">Your Information</h3>

                    <div class="form-group">
                        <label>Your Name <span class="required">*</span></label>
                        <input type="text" name="submitter_name" required>
                    </div>

                    <div class="form-group">
                        <label>Email <span class="required">*</span></label>
                        <input type="email" name="submitter_email" required>
                        <div class="help-text">For review notifications only</div>
                    </div>

                    <div class="form-group">
                        <label>Organization (optional)</label>
                        <input type="text" name="submitter_organization">
                    </div>

                    <div class="form-group">
                        <label>Website (optional)</label>
                        <input type="url" name="submitter_website">
                    </div>

                    <div class="form-group">
                        <label>Additional Notes</label>
                        <textarea name="notes" placeholder="Anything else we should know?"></textarea>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" name="contact_allowed" id="contact_allowed" checked>
                            <label for="contact_allowed">Allow FlexPBX team to contact me about this submission</label>
                        </div>
                    </div>

                    <button type="submit" class="btn">Submit Stream for Review</button>
                </form>
            </div>

            <!-- Become Provider Tab -->
            <div id="provider-tab" class="tab-content">
                <h2>Become a MOH Provider</h2>
                <div class="info-box">
                    Join our federated network of MOH providers! Host your own provider server and serve streams to FlexPBX installations worldwide.
                </div>

                <form id="provider-form">
                    <div class="form-group">
                        <label>Provider Name <span class="required">*</span></label>
                        <input type="text" name="provider_name" required>
                        <div class="help-text">Your service name (e.g., "Acme MOH Services")</div>
                    </div>

                    <div class="form-group">
                        <label>Display Name <span class="required">*</span></label>
                        <input type="text" name="display_name" required>
                    </div>

                    <div class="form-group">
                        <label>API Endpoint <span class="required">*</span></label>
                        <input type="url" name="api_endpoint" required placeholder="https://your-domain.com/api/moh-provider.php">
                        <div class="help-text">Must be compatible with FlexPBX MOH Provider API spec</div>
                    </div>

                    <div class="form-group">
                        <label>Description <span class="required">*</span></label>
                        <textarea name="description" required></textarea>
                        <div class="help-text">Describe your service and what makes it unique</div>
                    </div>

                    <div class="form-group">
                        <label>Website</label>
                        <input type="url" name="website">
                    </div>

                    <div class="form-group">
                        <label>Number of Streams Offered <span class="required">*</span></label>
                        <input type="number" name="streams_offered" min="1" value="1" required>
                    </div>

                    <div class="form-group">
                        <label>Country</label>
                        <input type="text" name="country">
                    </div>

                    <div class="form-group">
                        <label>Region/State</label>
                        <input type="text" name="region">
                    </div>

                    <h3 style="margin-top: 2rem;">Capabilities</h3>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" name="supports_search" id="supports_search">
                            <label for="supports_search">Supports search API</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" name="supports_manifest" id="supports_manifest">
                            <label for="supports_manifest">Provides module manifest</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" name="supports_health_check" id="supports_health_check">
                            <label for="supports_health_check">Has health check endpoint</label>
                        </div>
                    </div>

                    <div class="form-group">
                        <div class="checkbox-group">
                            <input type="checkbox" name="https_streaming" id="https_streaming">
                            <label for="https_streaming">Supports HTTPS streaming</label>
                        </div>
                    </div>

                    <h3 style="margin-top: 2rem;">Infrastructure</h3>

                    <div class="form-group">
                        <label>Hosting Type</label>
                        <select name="hosting_type">
                            <option value="cloud">Cloud (AWS, GCP, Azure, etc.)</option>
                            <option value="vps">VPS</option>
                            <option value="dedicated">Dedicated Server</option>
                            <option value="on-premise">On-Premise</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Uptime SLA</label>
                        <select name="uptime_sla">
                            <option value="best-effort">Best Effort</option>
                            <option value="95%">95%</option>
                            <option value="99%">99%</option>
                            <option value="99.9%">99.9%</option>
                            <option value="99.99%">99.99%</option>
                        </select>
                    </div>

                    <h3 style="margin-top: 2rem;">Contact Information</h3>

                    <div class="form-group">
                        <label>Contact Name <span class="required">*</span></label>
                        <input type="text" name="contact_name" required>
                    </div>

                    <div class="form-group">
                        <label>Contact Email <span class="required">*</span></label>
                        <input type="email" name="contact_email" required>
                    </div>

                    <div class="form-group">
                        <label>Organization</label>
                        <input type="text" name="organization">
                    </div>

                    <div class="form-group">
                        <label>Additional Notes</label>
                        <textarea name="notes"></textarea>
                    </div>

                    <button type="submit" class="btn">Submit Provider Registration</button>
                </form>
            </div>

            <!-- Guidelines Tab -->
            <div id="guidelines-tab" class="tab-content">
                <h2>Submission Guidelines</h2>

                <h3>Content Requirements</h3>
                <ul class="guideline-list">
                    <li>You must own rights or have proper licensing for all content</li>
                    <li>No copyrighted music without proper licenses</li>
                    <li>Creative Commons content must be properly attributed</li>
                    <li>Public domain content is welcome</li>
                    <li>Content must be appropriate for business environments</li>
                    <li>Family-friendly content preferred</li>
                </ul>

                <h3>Quality Standards</h3>
                <ul class="guideline-list">
                    <li>Minimum 64kbps bitrate (128kbps+ recommended)</li>
                    <li>Consistent audio levels (no sudden volume changes)</li>
                    <li>No extended silence or dead air</li>
                    <li>Clear audio without excessive noise</li>
                    <li>95%+ uptime for provider servers</li>
                </ul>

                <h3>Review Process</h3>
                <ul class="guideline-list">
                    <li>All submissions reviewed within 24-72 hours</li>
                    <li>Legal compliance verified</li>
                    <li>Stream accessibility tested</li>
                    <li>Audio quality assessed</li>
                    <li>Content appropriateness reviewed</li>
                    <li>Technical reliability checked</li>
                </ul>

                <h3>Provider Requirements</h3>
                <ul class="guideline-list">
                    <li>Public API endpoint compatible with FlexPBX spec</li>
                    <li>Minimum 95% uptime commitment</li>
                    <li>HTTPS support recommended</li>
                    <li>Health check endpoint required</li>
                    <li>At least 1 stream offered</li>
                    <li>Response time under 500ms preferred</li>
                </ul>

                <h3>Benefits</h3>
                <ul class="guideline-list">
                    <li>Listed in community catalog</li>
                    <li>Discoverable by FlexPBX installations worldwide</li>
                    <li>Technical documentation and support</li>
                    <li>Community recognition</li>
                    <li>Free exposure for your service</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        const API_URL = 'https://flexpbx.devinecreations.net/api/moh-submit.php';

        function switchTab(tab) {
            // Update tab buttons
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');

            // Update tab content
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.getElementById(`${tab}-tab`).classList.add('active');
        }

        function showAlert(message, type) {
            const alert = document.getElementById('alert');
            alert.textContent = message;
            alert.className = `alert alert-${type}`;
            alert.style.display = 'block';
            window.scrollTo({ top: 0, behavior: 'smooth' });

            setTimeout(() => {
                alert.style.display = 'none';
            }, 10000);
        }

        // Stream form submission
        document.getElementById('stream-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(e.target);
            const data = {
                stream_name: formData.get('stream_name'),
                display_name: formData.get('display_name') || formData.get('stream_name'),
                stream_url: formData.get('stream_url'),
                description: formData.get('description'),
                category: formData.get('category'),
                tags: formData.get('tags') ? formData.get('tags').split(',').map(t => t.trim()) : [],
                format: formData.get('format') || 'mp3',
                bitrate: formData.get('bitrate') || '128kbps',
                licensing: formData.get('licensing'),
                accessibility_features: {
                    audio_description: formData.get('audio_description') === 'on'
                },
                submitter_name: formData.get('submitter_name'),
                submitter_email: formData.get('submitter_email'),
                submitter_organization: formData.get('submitter_organization'),
                submitter_website: formData.get('submitter_website'),
                notes: formData.get('notes'),
                contact_allowed: formData.get('contact_allowed') === 'on'
            };

            try {
                const response = await fetch(`${API_URL}?action=submit-stream`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    showAlert(`‚úì ${result.message}\n\nSubmission ID: ${result.submission_id}\n\nExpected review time: ${result.expected_review_time}`, 'success');
                    e.target.reset();
                } else {
                    showAlert(`Error: ${result.error || result.message}`, 'error');
                }
            } catch (error) {
                showAlert(`Failed to submit: ${error.message}`, 'error');
            }
        });

        // Provider form submission
        document.getElementById('provider-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const formData = new FormData(e.target);
            const data = {
                provider_name: formData.get('provider_name'),
                display_name: formData.get('display_name') || formData.get('provider_name'),
                api_endpoint: formData.get('api_endpoint'),
                description: formData.get('description'),
                website: formData.get('website'),
                country: formData.get('country'),
                region: formData.get('region'),
                streams_offered: parseInt(formData.get('streams_offered')) || 1,
                supports_search: formData.get('supports_search') === 'on',
                supports_manifest: formData.get('supports_manifest') === 'on',
                supports_health_check: formData.get('supports_health_check') === 'on',
                https_streaming: formData.get('https_streaming') === 'on',
                hosting_type: formData.get('hosting_type'),
                uptime_sla: formData.get('uptime_sla'),
                contact_name: formData.get('contact_name'),
                contact_email: formData.get('contact_email'),
                organization: formData.get('organization'),
                notes: formData.get('notes')
            };

            try {
                const response = await fetch(`${API_URL}?action=submit-provider`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });

                const result = await response.json();

                if (result.success) {
                    showAlert(`‚úì ${result.message}\n\nProvider ID: ${result.provider_id}\n\nExpected review time: ${result.expected_review_time}`, 'success');
                    e.target.reset();
                } else {
                    showAlert(`Error: ${result.error || result.message}`, 'error');
                }
            } catch (error) {
                showAlert(`Failed to submit: ${error.message}`, 'error');
            }
        });
    </script>
</body>
</html>
